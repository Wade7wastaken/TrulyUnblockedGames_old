<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title></title>
	<style>
		body {
			color: rgb(170, 170, 170);
			background-color: rgb(20, 20, 20);
		}

		a {
			color: rgb(170, 170, 170);
		}
	</style>
</head>
<body>
	<a href="default.html">Back</a>
	<div id="base">
	</div>
	<script>
		const resolutions = [[640, 480], [960, 720], [1280, 960]];
		const params = new URLSearchParams(window.location.search);
		const res = sessionStorage.getItem('o_res');
		const emu = sessionStorage.getItem('o_emu');
		const origin = sessionStorage.getItem('origin');
		const base = document.getElementById('base');
		if (emu == 0) {
			if (sessionStorage.emuWidth) {
				base.style.width = String(sessionStorage.emuWidth) + 'px';
			} else {
				base.style.width = String(resolutions[res][0]) + 'px';
			}
			if (sessionStorage.emuHeight) {
				base.style.height = String(sessionStorage.emuHeight) + 'px';
			} else {
				base.style.height = String(resolutions[res][1]) + 'px';
			}
			base.style.maxWidth = '100%';
			base.style.margin = 'auto';
			const innerDiv = document.createElement('div');
			innerDiv.id = 'emulator';
			base.appendChild(innerDiv);
			var EJS_player = '#emulator';
			var EJS_gameUrl = 'ROMs/' + params.get('ver') + '/' + params.get('game') + '.zip';
			var EJS_core = params.get('ver');
			var EJS_DEBUG_XX = true;
			const emuloader = document.createElement('script');

			if (origin == 0) {
				var EJS_pathtodata = "EmulatorJS/";
				emuloader.src = 'EmulatorJS/loader.js';
			} else {
				var EJS_pathtodata = "https://rawcdn.githack.com/ethanaobrien/emulatorjs/main/data/";
				emuloader.src = "https://rawcdn.githack.com/ethanaobrien/emulatorjs/main/data/loader.js";
			}

			document.body.append(emuloader);
		}
		if (emu == 1) {
			base.id = 'emulator';
			var NepPlayer = '#emulator';
			var NepEmu = params.get('ver');
			var NepLang = 'en';
			var gameUrl = 'ROMs/' + params.get('ver') + '/' + params.get('game') + '.zip';

			const njsloader = document.createElement('script');

			njsloader.src = 'loaders/njsLoader.js';
			//njsloader.src = 'https://mem.neptunjs.com/njs/njsLoader.js'; // additional launcher
			document.body.append(njsloader);

			var style = document.createElement("link");
			style.href = "NeptunJS/neptun.css";
			style.rel = "stylesheet";
			style.type = "text/css";
			document.head.appendChild(style);
		}
	</script>
</body>
</html>