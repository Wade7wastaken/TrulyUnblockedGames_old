<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <style>
        body {
            color: rgb(170, 170, 170);
            background-color: rgb(20, 20, 20);
        }

        a {
            color: rgb(170, 170, 170);
        }
    </style>
</head>
<body>
    <a href="default.html">Back</a>
    <div id="base">
    </div>
    <script>
        const resolutions = [[640, 480], [960, 720], [1280, 960]];
        const params = new URLSearchParams(window.location.search);
        const res = sessionStorage.getItem('res');
        const type = sessionStorage.getItem('type');
        const base = document.getElementById('base');
        //const script = document.createElement('script');
        if (type == 0) {
            // document.getElementById('base').innerHTML = '<div id="emulator"></div>';
            base.id = 'emulator';
            var NepPlayer = '#emulator';
            var NepEmu = params.get('ver');
            var NepLang = 'en';
            var gameUrl = 'ROMs/' + params.get('ver') + '/' + params.get('game') + '.zip';

            const njsloader = document.createElement('script');
            if (sessionStorage.origin == 0) {
                njsloader.src = 'https://mem.neptunjs.com/njs/njsLoader.js';
            } else {
                njsloader.src = 'loaders/njsLoader.js';
            }
            document.body.append(njsloader);
        }
        if (type == 1) {
            // document.getElementById('base').innerHTML = '<div style="width:' + String(res[sessionStorage.getItem('res')][0]) + 'px;height:' + String(res[sessionStorage.getItem('res')][1]) + 'px;max-width:100%;margin:auto;"><div id="emulator"></div></div>';
            // document.getElementById('base').style = 'width:' + String(resolutions[res][0]) + 'px;height:' + String(resolutions[res][1] + 'px;max-width:100%;margin:auto;')
            if (sessionStorage.emuWidth) {
                base.style.width = String(sessionStorage.emuWidth) + 'px';
            } else {
                base.style.width = String(resolutions[res][0]) + 'px';
            }
            if (sessionStorage.emuHeight) {
                base.style.height = String(sessionStorage.emuHeight) + 'px';
            } else {
                base.style.height = String(resolutions[res][1]) + 'px';
            }
            base.style.maxWidth = '100%';
            base.style.margin = 'auto';
            const innerDiv = document.createElement('div');
            innerDiv.id = 'emulator';
            base.appendChild(innerDiv);
            var EJS_player = '#emulator';
            if (params.get('ver') == 'nes') {
                var EJS_biosUrl = 'ROMs/nes/DISKSYS.zip';
            }
            var EJS_gameUrl = 'ROMs/' + params.get('ver') + '/' + params.get('game') + '.zip';
            var EJS_core = params.get('ver');

            const emuloader = document.createElement('script');
            if (sessionStorage.origin == 0) {
                emuloader.src = 'https://www.emulatorjs.com/loader.js';
            } else {
                emuloader.src = 'loaders/emuLoader.js';
            }
            document.body.append(emuloader);
        }
    </script>
</body>
</html>